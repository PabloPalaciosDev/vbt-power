import{d as u}from"./chunk-WKJBYDQ3.js";var c={production:!0,regresionASquat:-100,regresionBSquat:115,regresionABench:-130,regresionBBench:110,regresionADeadlift:-120,regresionBDeadlift:120};var S=(()=>{let n=class n{constructor(){this.STORAGE_KEY="vbt_personalized_data",this.COEFFICIENTS_KEY="vbt_regression_coefficients"}savePersonalizedData(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(r){console.error("Error al guardar datos personalizados:",r)}}getPersonalizedData(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):null}catch(e){return console.error("Error al obtener datos personalizados:",e),null}}hasPersonalizedData(){return this.getPersonalizedData()!==null}clearPersonalizedData(){try{localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.COEFFICIENTS_KEY)}catch(e){console.error("Error al eliminar datos personalizados:",e)}}calculateAndSaveRegressionCoefficients(e){let r=this.calculateRegressionCoefficients([{velocity:e.squatVelocity90,percentage:90},{velocity:e.squatVelocity85,percentage:85},{velocity:e.squatVelocity75,percentage:75}]),t=this.calculateRegressionCoefficients([{velocity:e.benchVelocity90,percentage:90},{velocity:e.benchVelocity85,percentage:85},{velocity:e.benchVelocity75,percentage:75}]),o=this.calculateRegressionCoefficients([{velocity:e.deadliftVelocity90,percentage:90},{velocity:e.deadliftVelocity85,percentage:85},{velocity:e.deadliftVelocity75,percentage:75}]),l={regresionASquat:r.slope,regresionBSquat:r.intercept,regresionABench:t.slope,regresionBBench:t.intercept,regresionADeadlift:o.slope,regresionBDeadlift:o.intercept};try{localStorage.setItem(this.COEFFICIENTS_KEY,JSON.stringify(l))}catch(f){console.error("Error al guardar coeficientes:",f)}return l}calculateRegressionCoefficients(e){let r=e.length,t=e.reduce((i,s)=>i+s.velocity,0),o=e.reduce((i,s)=>i+s.percentage,0),l=e.reduce((i,s)=>i+s.velocity*s.percentage,0),f=e.reduce((i,s)=>i+s.velocity*s.velocity,0),a=(r*l-t*o)/(r*f-t*t),d=(o-a*t)/r;return a>0&&(a=-a),{slope:parseFloat(a.toFixed(3)),intercept:parseFloat(d.toFixed(3))}}getRegressionCoefficients(){try{let e=localStorage.getItem(this.COEFFICIENTS_KEY);if(e)return JSON.parse(e)}catch(e){console.error("Error al obtener coeficientes guardados:",e)}return{regresionASquat:c.regresionASquat,regresionBSquat:c.regresionBSquat,regresionABench:c.regresionABench,regresionBBench:c.regresionBBench,regresionADeadlift:c.regresionADeadlift,regresionBDeadlift:c.regresionBDeadlift}}processAndSaveUserData(e){return this.savePersonalizedData(e),this.calculateAndSaveRegressionCoefficients(e)}getConfigurationStatus(){let e=this.hasPersonalizedData();return{isPersonalized:e,message:e?"\u2705 Usando tus valores personalizados de VBT":"\u26A0\uFE0F Estas usando valores gen\xE9ricos"}}calculateOneRmPercentage(e,r){let t=this.getRegressionCoefficients();switch(e){case 1:return t.regresionASquat*r+t.regresionBSquat;case 2:return t.regresionABench*r+t.regresionBBench;case 3:return t.regresionADeadlift*r+t.regresionBDeadlift;default:return 0}}calculateVbt(e){let r=this.calculateOneRmPercentage(e.ejercicio,e.velocidad),t=e.carga/(r/100),o;return e.porcentaje===100?o=t:o=t*(e.porcentaje/100),{percent1Rm:r,resultado1RM:t,cargaEstimada:o}}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"});let g=n;return g})();export{S as a};
